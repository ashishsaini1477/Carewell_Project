<div class="container-fluid dashboard-wrapper">

  <!-- HEADER -->
  <!-- <div class="dashboard-header d-flex justify-content-between align-items-center mb-4">
     <div class="d-flex align-items-center dashboard-title">
      <a routerLink="/" class="me-3">
        <img src="assets/images/Carwell_Logo.png"
             alt="Carwell"
             width="55">
      </a>

      <div>
        <h2 class="fw-bold mb-0">Dashboard</h2>
        <small class="text-muted">Overview of your garage operations</small>
      </div>
    </div>

    <div class="action-buttons">
      <button class="btn btn-sm btn-outline-primary me-2" (click)="goToAddCustomer()">+ Customer</button>
      <button class="btn btn-sm btn-outline-primary me-2" (click)="goToAddJobCard()">+ Job Card</button>
      <button class="btn btn-sm btn-outline-primary me-2" (click)="goToAddInvoice()">+ Invoice</button>
      <button class="btn btn-sm btn-outline-secondary" (click)="goToEditInvoice()">Edit Invoice</button>
    </div>
  </div> -->

  <div class="dashboard-header d-flex justify-content-between align-items-center mb-4">

  <!-- LEFT: Logo + Title -->
  <div class="d-flex align-items-center dashboard-title">
    <a routerLink="/" class="me-3">
      <img src="assets/images/Carwell_Logo.png" alt="Carwell" width="100">
    </a>

    <div>
      <h2 class="fw-bold mb-0">Dashboard</h2>
      <small class="text-muted ovr-color">Overview of your garage operations</small>
    </div>
  </div>

  <!-- RIGHT: ACTION BUTTONS -->
  <div class="action-buttons ms-auto">
    <button class="btn btn-sm btn-outline-primary me-2" (click)="goToAddCustomer()">+ Customer</button>
    <button class="btn btn-sm btn-outline-primary me-2" (click)="goToAddJobCard()">+ Job Card</button>
    <button class="btn btn-sm btn-outline-primary me-2" (click)="goToAddInvoice()">+ Invoice</button>
    <button class="btn btn-sm btn-outline-primary me-2" (click)="goToEditInvoice()">Edit Invoice</button>
  </div>

</div>




  <!-- OVERVIEW -->
  <!-- <h5 class="mb-3">Overview</h5> -->
  <div class="row g-3 mb-4">
    <div class="col-md-3">
      <div class="stat-card bg-success">
        <h6>Happy Customers</h6>
        <h2>{{dashboardCount.customerCount}}</h2>
      </div>
    </div>

    <div class="col-md-3">
      <div class="stat-card bg-danger">
        <h6>Vehicles</h6>
        <h2>{{dashboardCount.vehicleCount}}</h2>
      </div>
    </div>

    <div class="col-md-3">
      <div class="stat-card bg-warning">
        <h6>Job Cards</h6>
        <h2>{{dashboardCount.jobCardCount}}</h2>
      </div>
    </div>

    <div class="col-md-3">
      <div class="stat-card bg-primary">
        <h6>Invoices</h6>
        <h2>{{dashboardCount.invoiceCount}}</h2>
      </div>
    </div>
  </div>


  <!-- Customers -->
  <div class="section-header">
    <h5>Top Customers</h5>
  </div>
  <div class="row mt-4">
    <div class="col-md-6">
      <div class="card dashboard-card">
        <div class="card-header">
          <h5 class="mb-0">Top 10 Customers</h5>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover table-striped mb-0">
              <thead class="thead-dark">
                <tr>
                  <th class="align-middle" scope="col" (click)="sortTable('name')">
                    Customer Name
                    <span><i class="fa fa-caret-down" *ngIf="prop=='name'&&reverse"></i></span>
                    <span><i class="fa fa-caret-up" *ngIf="prop=='name'&&!reverse"></i></span>
                  </th>
                  <th class="align-middle" scope="col" (click)="sortTable('mobile')">
                    Mobile No.
                    <span><i class="fa fa-caret-down" *ngIf="prop=='mobile'&&reverse"></i></span>
                    <span><i class="fa fa-caret-up" *ngIf="prop=='mobile'&&!reverse"></i></span>
                  </th>
                  <th class="align-middle" scope="col" (click)="sortTable('address')">
                    Address
                    <span><i class="fa fa-caret-down" *ngIf="prop=='address'&&reverse"></i></span>
                    <span><i class="fa fa-caret-up" *ngIf="prop=='address'&&!reverse"></i></span>
                  </th>
                  <th class="align-middle" scope="col" (click)="sortTable('createdDate')">
                    CreatedDate
                    <span><i class="fa fa-caret-down" *ngIf="prop=='createdDate'&&reverse"></i></span>
                    <span><i class="fa fa-caret-up" *ngIf="prop=='createdDate'&&!reverse"></i></span>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let cus of customerArray">
                  <td>{{ cus.name }}</td>
                  <td>{{ cus.mobile }}</td>
                  <td>{{ cus.address }}</td>
                  <td>{{ cus.createdDate | date:'dd MMM yyyy HH:mm' }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- JobCards -->

    <div class="col-md-6">
      <div class="card dashboard-card">
        <div class="card-header">
          <h5 class="mb-0">Top 10 JobCards</h5>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover table-striped mb-0">
              <thead class="thead-dark">
                <tr>
                  <th class="align-middle" scope="col" (click)="sortTable('registrationNo')">
                    Registration No
                    <span><i class="fa fa-caret-down" *ngIf="prop=='category'&&reverse"></i></span>
                    <span><i class="fa fa-caret-up" *ngIf="prop=='category'&&!reverse"></i></span>
                  </th>
                  <th class="align-middle" scope="col" (click)="sortTable('model')">
                    Vehicle Model
                    <span><i class="fa fa-caret-down" *ngIf="prop=='buyPrice'&&reverse"></i></span>
                    <span><i class="fa fa-caret-up" *ngIf="prop=='buyPrice'&&!reverse"></i></span>
                  </th>
                  <th class="align-middle" scope="col" (click)="sortTable('odometerReading')">
                    Odometer Reading
                    <span><i class="fa fa-caret-down" *ngIf="prop=='sellPrice'&&reverse"></i></span>
                    <span><i class="fa fa-caret-up" *ngIf="prop=='sellPrice'&&!reverse"></i></span>
                  </th>
                  <th class="align-middle" scope="col" (click)="sortTable('statusName')">
                    Status
                    <span><i class="fa fa-caret-down" *ngIf="prop=='warrenty'&&reverse"></i></span>
                    <span><i class="fa fa-caret-up" *ngIf="prop=='warrenty'&&!reverse"></i></span>
                  </th>
                  <th class="align-middle" scope="col" (click)="sortTable('openDate')">
                    JobCard Date
                    <span><i class="fa fa-caret-down" *ngIf="prop=='warrenty'&&reverse"></i></span>
                    <span><i class="fa fa-caret-up" *ngIf="prop=='warrenty'&&!reverse"></i></span>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let card of jobcardArray">
                  <td class="align-middle">{{card.registrationNo}}</td>
                  <td class="align-middle">{{card.model}}</td>
                  <td class="align-middle">{{card.odometerReading}}</td>
                  <td class="align-middle">{{card.jobCardStatus.statusName}}</td>
                  <td class="align-middle">{{card.openDate | date:'dd MMM yyyy HH:mm'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="row mt-4">
    <div class="col-md-6">
      <div class="card dashboard-card">
        <div class="card-header">
          <h4>Sold Items Table</h4>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover table-striped mb-0">
              <thead class="thead-dark">
                <tr>
                  <th>SL No</th>
                  <th>Catagory</th>
                  <th>Quantity</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let s of stockArraySold; let i = 'index'">
                  <td>{{i+1}}</td>
                  <td>{{s.category}}</td>
                  <td>{{s.quantity}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card">
        <div class="card-header bg-primary text-white">
          <h4>Top 5 Items Sold</h4>
        </div>
        <div class="card-body">
          <div *ngIf="chart">
            <canvas id="canvasBar">{{ chart['bar'] }}</canvas>
          </div>
        </div>
      </div>
    </div>
  </div> -->
  <footer class="dashboard-footer mt-5">
    <div class="text-center text-muted">
      Â© {{currentYear}} Carwell Garage Management System
    </div>
  </footer>

</div>